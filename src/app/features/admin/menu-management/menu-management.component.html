<div class="menu-management-container">
  <div class="header">
    <h2>üçΩÔ∏è Menu Management</h2>
    <button class="btn primary" (click)="openForm()" *ngIf="!showForm">
      ‚ûï Add New Item
    </button>
  </div>

  <!-- Add/Edit Form -->
  <div class="form-section" *ngIf="showForm">
    <h3>{{ editingId ? 'Edit Item' : 'Add New Item' }}</h3>
    <div class="form-group">
      <label>Item Name</label>
      <input type="text" [(ngModel)]="newItem.name" placeholder="Enter item name" />
    </div>

    <div class="form-group">
      <label>Description</label>
      <textarea [(ngModel)]="newItem.description" placeholder="Enter description"></textarea>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label>Price</label>
        <input type="number" [(ngModel)]="newItem.price" placeholder="0" />
      </div>

      <div class="form-group">
        <label>Category</label>
        <input type="text" [(ngModel)]="newItem.category" placeholder="e.g., Pizza" />
      </div>
    </div>

    <div class="form-group">
      <label>Product Image</label>
      <div class="image-upload-container">
        <input type="file" (change)="onFileSelected($event)" accept="image/*" id="fileInput" class="file-input">
        <div *ngIf="isUploading">Uploading...</div>
        <div *ngIf="uploadError" class="error">{{ uploadError }}</div>

        <div *ngIf="newItem.imageUrl" class="image-preview">
          <img [src]="newItem.imageUrl" alt="Preview">
          <p class="uploaded-text">‚úÖ Image Uploaded</p>
        </div>
      </div>
    </div>

    <div class="form-group checkbox-group">
      <label>
        <input type="checkbox" [(ngModel)]="newItem.isVeg">
        Is Vegetarian? üåø
      </label>
      <label style="margin-left: 20px;">
        <input type="checkbox" [(ngModel)]="newItem.isAvailable">
        Is Available? (In Stock) ‚úÖ
      </label>
    </div>

    <div class="form-actions">
      <button class="btn secondary" (click)="cancelForm()">Cancel</button>
      <button class="btn primary" (click)="saveItem()">
        {{ editingId ? 'Update' : 'Add' }} Item
      </button>
    </div>
  </div>

  <!-- Search -->
  <div class="search-section" *ngIf="!showForm">
    <input type="text" [(ngModel)]="searchText" (input)="onSearch()" placeholder="Search items..."
      class="search-input" />
  </div>

  <!-- Loading -->
  <div *ngIf="loading" class="loading">Loading...</div>

  <!-- Table -->
  <div class="table-section" *ngIf="!loading && !showForm">
    <table class="menu-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Status</th>
          <th>Category</th>
          <th>Price</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of filteredItems; trackBy: trackByItemId">
          <td>{{ item.id }}</td>
          <td>
            {{ item.name }}
            <span *ngIf="item.isVeg" title="Vegetarian">üåø</span>
          </td>
          <td>
            <span class="badge" [style.background-color]="item.isAvailable ? '#e8f5e9' : '#ffebee'"
              [style.color]="item.isAvailable ? '#2e7d32' : '#c62828'">
              {{ item.isAvailable ? 'In Stock' : 'Out of Stock' }}
            </span>
          </td>
          <td>{{ item.category }}</td>
          <td>‚Çπ{{ item.price }}</td>
          <td class="actions">
            <button class="btn-edit" (click)="editItem(item)">‚úèÔ∏è Edit</button>
            <button class="btn-delete" (click)="deleteItem(item)">
              üóëÔ∏è Delete
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Empty State -->
  <div *ngIf="filteredItems.length === 0 && !loading && !showForm" class="empty">
    <p>No items found</p>
  </div>
</div>