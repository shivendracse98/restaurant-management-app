<div class="admin-dashboard">

  <header>
    <div class="header-left">
      <h2>
        <mat-icon>dashboard</mat-icon>
        Admin Dashboard
      </h2>
      <p class="subtitle">Overview for {{ auth.currentUser()?.name }}</p>
    </div>

    <div class="header-actions">
      <!-- View Toggle for Group Admins -->
      <div class="view-toggle" *ngIf="canViewConsolidated">
        <button class="btn-toggle" [class.active]="viewMode === 'SINGLE'"
          (click)="toggleView('SINGLE')">Individual</button>
        <button class="btn-toggle" [class.active]="viewMode === 'GROUP'" (click)="toggleView('GROUP')">Group
          View</button>
      </div>
    </div>
  </header>

  <!-- LIVE STATS ROW -->
  <div class="stats-row" *ngIf="stats">

    <!-- Revenue Card -->
    <div class="stat-card">
      <div class="stat-content">
        <span class="label">Today's Revenue</span>
        <span class="value">{{ stats.todayRevenue | currency:'INR' }}</span>
        <span class="sub-text">
          <mat-icon inline>trending_up</mat-icon> Live
        </span>
      </div>
      <div class="icon-box revenue">
        <mat-icon>payments</mat-icon>
      </div>
    </div>

    <!-- Pending Orders Card -->
    <div class="stat-card" routerLink="/admin/orders" style="cursor: pointer;">
      <div class="stat-content">
        <span class="label">Pending Orders</span>
        <span class="value">{{ stats.pendingOrders }}</span>
        <span class="sub-text" style="color: #F39C12;">
          Needs Attention
        </span>
      </div>
      <div class="icon-box pending">
        <mat-icon>notifications_active</mat-icon>
      </div>
    </div>

    <!-- Total Orders Card -->
    <div class="stat-card" routerLink="/admin/orders" style="cursor: pointer;">
      <div class="stat-content">
        <span class="label">Today's Orders</span>
        <span class="value">{{ stats.todayOrders }}</span>
        <span class="sub-text">
          <mat-icon inline>insights</mat-icon> All Sources
        </span>
      </div>
      <div class="icon-box orders">
        <mat-icon>inventory_2</mat-icon>
      </div>
    </div>

  </div>

  <!-- NAVIGATION SECTION -->
  <section class="nav-section">
    <h3>Quick Actions</h3>

    <div class="cards-grid">

      <!-- Analytics -->
      <div class="nav-card" routerLink="/admin/analytics">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>analytics</mat-icon>
          </div>
          <h4>Analytics</h4>
        </div>
        <p>View daily, weekly, and monthly performance trends.</p>
      </div>

      <!-- Manage Orders -->
      <div class="nav-card" routerLink="/admin/orders">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>restaurant</mat-icon>
          </div>
          <h4>Manage Orders</h4>
        </div>
        <p>View live orders, update status, and track kitchen.</p>
      </div>

      <!-- Manage Menu -->
      <div class="nav-card" routerLink="/admin/menu">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>menu_book</mat-icon>
          </div>
          <h4>Manage Menu</h4>
        </div>
        <p>Manage Local Menu, Master Items, and Overrides.</p>
      </div>

      <!-- Manage Offers -->
      <div class="nav-card" routerLink="/admin/offers">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>local_offer</mat-icon>
          </div>
          <h4>Offers & Coupons</h4>
        </div>
        <p>Create discount codes and manage active promotions.</p>
      </div>

      <!-- Payments -->
      <div class="nav-card" routerLink="/admin/payments">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>credit_card</mat-icon>
          </div>
          <h4>Payments</h4>
        </div>
        <p>Track transactions and settlements securely.</p>
      </div>

      <!-- Staff Management -->
      <div class="nav-card" routerLink="/admin/staff">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>groups</mat-icon>
          </div>
          <h4>Manage Staff</h4>
        </div>
        <p>Add staff, manage permissions, and approve leaves.</p>
      </div>

      <!-- Table QR -->
      <div class="nav-card" routerLink="/admin/qr-codes">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>qr_code_2</mat-icon>
          </div>
          <h4>Table QR</h4>
        </div>
        <p>Generate scan codes for table ordering.</p>
      </div>

      <!-- Settings -->
      <div class="nav-card" routerLink="/admin/settings">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>settings</mat-icon>
          </div>
          <h4>Settings</h4>
        </div>
        <p>Brand identity, payment modes, and profile setup.</p>
      </div>

      <!-- Billings & Subscription -->
      <div class="nav-card" routerLink="/admin/billing">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>receipt_long</mat-icon>
          </div>
          <h4>Billing & Subscription</h4>
        </div>
        <p>View invoices, manage plan, and update payment method.</p>
      </div>

      <!-- Reviews -->
      <div class="nav-card" routerLink="/admin/reviews">
        <div class="card-header">
          <div class="card-icon">
            <mat-icon>star</mat-icon>
          </div>
          <h4>Reviews</h4>
        </div>
        <p>View customer feedback and reply to ratings.</p>
      </div>

    </div>
  </section>

</div>
<!-- Add Staff Modal -->
<div class="modal-backdrop" *ngIf="showStaffModal" (click)="closeStaffModal()">
  <div class="modal" (click)="$event.stopPropagation()">
    <div class="modal-header">
      <h3>ðŸ‘¤ Add New Staff Member</h3>
      <button class="close-btn" (click)="closeStaffModal()">Ã—</button>
    </div>
    <div class="modal-body">
      <form (ngSubmit)="registerStaff()">
        <div class="form-group">
          <label>Name</label>
          <input type="text" [(ngModel)]="newStaff.name" name="name" required placeholder="John Doe">
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" [(ngModel)]="newStaff.email" name="email" required placeholder="staff@example.com">
        </div>
        <div class="form-group">
          <label>Password</label>
          <input type="password" [(ngModel)]="newStaff.password" name="password" required placeholder="******">
        </div>
        <div class="form-group">
          <label>Phone</label>
          <input type="tel" [(ngModel)]="newStaff.phoneNumber" name="phone" placeholder="9876543210">
        </div>

        <div class="form-actions" style="margin-top: 20px; display: flex; justify-content: flex-end;">
          <button type="button" class="btn" (click)="closeStaffModal()" style="margin-right: 10px;">Cancel</button>
          <button type="submit" class="btn primary-btn">Create Account</button>
        </div>
      </form>
    </div>
  </div>
</div>