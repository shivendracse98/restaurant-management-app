<div class="analytics-container">

    <div class="header">
        <div>
            <h2>ðŸš€ Business Overview</h2>
            <p class="subtitle">Track your restaurant's performance and growth.</p>
        </div>

        <div class="period-selector">
            <button *ngFor="let p of periods" [class.active]="currentPeriod === p" (click)="setPeriod(p)">
                {{ p }}
            </button>
        </div>
    </div>

    <!-- SUMMARY CARDS (KPIs) -->
    <div class="kpi-grid" *ngIf="!loading && data.length > 0">
        <div class="kpi-card revenue">
            <div class="icon">ðŸ’°</div>
            <div class="info">
                <span class="label">Total Revenue</span>
                <span class="value">{{ summaryStats.totalRevenue | currency:'INR' }}</span>
            </div>
        </div>

        <div class="kpi-card orders">
            <div class="icon">ðŸ“¦</div>
            <div class="info">
                <span class="label">Total Orders</span>
                <span class="value">{{ summaryStats.totalOrders }}</span>
            </div>
        </div>

        <div class="kpi-card aov">
            <div class="icon">ðŸ“‰</div>
            <div class="info">
                <span class="label">Avg. Order Value</span>
                <span class="value">{{ summaryStats.avgOrderValue | currency:'INR' }}</span>
            </div>
        </div>
    </div>

    <!-- START: Chart JS Canvas -->
    <div class="chart-container" *ngIf="!loading && data.length > 0">
        <canvas baseChart [data]="barChartData" [options]="barChartOptions" [type]="barChartType">
        </canvas>
    </div>

    <!-- LOADING STATE -->
    <div class="loading" *ngIf="loading">
        <div class="spinner"></div>
    </div>

    <!-- EMPTY STATE -->
    <div class="empty" *ngIf="!loading && data.length === 0">
        <div class="empty-icon">ðŸ“Š</div>
        <h3>No Data Found</h3>
        <p>There are no sales records for this {{ currentPeriod | lowercase }}.</p>
    </div>

</div>