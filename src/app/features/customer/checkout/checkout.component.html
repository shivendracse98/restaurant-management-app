<!-- src/app/features/customer/components/checkout/checkout.component.html -->

<div class="checkout-container">
  <div class="checkout-card">
    <h2>ğŸ›’ Checkout</h2>
    <p class="subtext">Almost there! Please confirm your delivery details below.</p>

    <form [formGroup]="form" (ngSubmit)="submit()" class="checkout-form">
      <!-- Customer Name -->
      <div class="form-group">
        <label>ğŸ‘¤ Customer Name *</label>
        <input type="text" formControlName="customerName" placeholder="Enter your name" class="form-control" />
        <small *ngIf="form.get('customerName')?.hasError('required') && form.get('customerName')?.touched"
          class="error">
          Name is required
        </small>
        <small *ngIf="form.get('customerName')?.hasError('minlength') && form.get('customerName')?.touched"
          class="error">
          Minimum 2 characters
        </small>
      </div>

      <!-- Phone -->
      <div class="form-group">
        <label>ğŸ“± Phone *</label>
        <input type="tel" formControlName="customerPhone" placeholder="10-digit phone number" maxlength="10"
          class="form-control" />
        <small *ngIf="form.get('customerPhone')?.hasError('pattern') && form.get('customerPhone')?.touched"
          class="error">
          Enter valid 10-digit phone number
        </small>
      </div>

      <!-- Email -->
      <div class="form-group">
        <label>ğŸ“§ Email *</label>
        <input type="email" formControlName="customerEmail" placeholder="your@email.com" class="form-control" />
        <small *ngIf="form.get('customerEmail')?.hasError('email') && form.get('customerEmail')?.touched" class="error">
          Enter valid email
        </small>
      </div>

      <!-- Address -->
      <div class="form-group">
        <label>ğŸ“ Delivery Address <span *ngIf="form.get('orderType')?.value === 'DELIVERY'"
            style="color:red">*</span></label>
        <textarea formControlName="address" placeholder="Enter your delivery address" rows="3"
          class="form-control"></textarea>
        <small *ngIf="form.get('address')?.hasError('required') && form.get('address')?.touched" class="error">
          Address is required
        </small>
      </div>

      <!-- Order Type -->
      <div class="form-group">
        <label>ğŸ“¦ Order Type *</label>
        <select formControlName="orderType" class="form-control">
          <option value="DELIVERY">ğŸšš Delivery</option>
          <option value="PICKUP">ğŸ“ Pickup</option>
          <option value="DINE_IN">ğŸ½ï¸ Dine In</option>
        </select>
      </div>

      <!-- Order Summary -->
      <div class="order-summary">
        <h3>Order Summary</h3>
        <div class="summary-items">
          <div *ngFor="let item of cart.items" class="item-line">
            <span>{{ item.menuItem.name }} Ã— {{ item.qty }}</span>
            <span>â‚¹{{ (item.menuItem.price * item.qty).toFixed(2) }}</span>
          </div>
        </div>
        <div class="summary-total">
          <span>Total Amount</span>
          <strong>â‚¹{{ total.toFixed(2) }}</strong>
        </div>
      </div>

      <!-- Submit Button -->
      <!-- Submit Button (Wrapped for Sticky Footer) -->
      <div class="actions">
        <button type="submit" [disabled]="loading || form.invalid || cart.getCount() === 0" class="btn-submit">
          <span *ngIf="!loading">
            {{ (form.get('orderType')?.value === 'DINE_IN' || form.get('orderType')?.value === 'PICKUP') ? 'âœ… Place
            Order'
            : 'âœ… Place Order & Pay' }}
          </span>
          <span *ngIf="loading">â³ Processing...</span>
        </button>
      </div>
    </form>
  </div>
</div>