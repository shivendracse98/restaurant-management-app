<div class="menu-container" [ngClass]="'mode-' + viewMode">
  <div class="menu-header">
    <h2>ğŸ½ï¸ {{ isAdminMode() ? 'Manage Menu' : 'Our Menu' }}</h2>
    <p *ngIf="isAdminMode()" class="admin-subtitle">Add, edit, or delete menu items</p>
  </div>

  <!-- Dietary Filter -->
  <div class="dietary-filter" *ngIf="isCustomerMode()">
    <button [class.active]="filterType === 'ALL'" (click)="setFilter('ALL')">All</button>
    <button [class.active]="filterType === 'VEG'" (click)="setFilter('VEG')" class="veg-btn">Veg Only ğŸŒ¿</button>
    <button [class.active]="filterType === 'NON_VEG'" (click)="setFilter('NON_VEG')" class="non-veg-btn">Non-Veg
      ğŸ—</button>
  </div>

  <div class="menu-grid">
    <div class="menu-item" *ngFor="let item of filteredFoodItems; trackBy: trackByItemId"
      [class.out-of-stock]="item.isAvailable === false">
      <!-- Click Area - Different behavior for customer vs admin -->
      <div class="click-area" *ngIf="isCustomerMode()" [routerLink]="['/menu', item.id]">
        <div class="image-wrapper">
          <img [src]="item.imageUrl" [alt]="item.name" />
          <span class="veg-badge" [class.non-veg]="!item.isVeg">
            {{ item.isVeg === false ? 'ğŸ”´' : 'ğŸŸ¢' }}
          </span>
          <!-- Out of Stock Overlay -->
          <div *ngIf="item.isAvailable === false" class="stock-overlay">
            <span>Out Of Stock</span>
          </div>
        </div>

        <h3>{{ item.name }}</h3>
        <p>{{ item.description }}</p>
        <strong>â‚¹{{ item.price }}</strong>
      </div>

      <!-- Admin View - Show item details in table-like format -->
      <div class="item-details" *ngIf="isAdminMode()">
        <img [src]="item.imageUrl" [alt]="item.name" class="admin-image" />
        <div class="admin-info">
          <h3>{{ item.name }}</h3>
          <p class="category">{{ item.category }}</p>
          <p class="description">{{ item.description }}</p>
          <div class="price-section">
            <strong class="price">â‚¹{{ item.price }}</strong>
          </div>
        </div>
      </div>

      <!-- Customer: Add to Cart Button -->
      <!-- Show Add if Available -->
      <button *ngIf="isCustomerMode() && item.isAvailable !== false" class="btn primary add-to-cart"
        (click)="addToCart(item)">
        ğŸ›’ Add to Cart
      </button>

      <!-- Show Disabled if Unavailable -->
      <button *ngIf="isCustomerMode() && item.isAvailable === false" class="btn disabled add-to-cart" disabled
        style="background: #ccc; cursor: not-allowed; color: #666;">
        ğŸ”’ Out of Stock
      </button>

      <!-- Admin: Edit and Delete Buttons -->
      <div *ngIf="isAdminMode()" class="admin-actions">
        <button class="btn edit" (click)="editMenuItem(item)">
          âœï¸ Edit
        </button>
        <button class="btn delete" (click)="deleteMenuItem(item)">
          ğŸ—‘ï¸ Delete
        </button>
      </div>
    </div>
  </div>

  <!-- Empty State -->
  <div *ngIf="foodItems.length === 0" class="empty-state">
    <p>{{ isAdminMode() ? 'No menu items available' : 'No items available' }}</p>
  </div>
</div>